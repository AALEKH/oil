image: debian/bullseye
packages:
  # for utf-8
  - locales
  - zip
  - python2  # needed for bullseye, but not buster
  - podman
  # missing dependencies of podman
  - uidmap
  - slirp4netns
  # - docker.io  # Debian Buster name for Docker package 
secrets:
  - 2678474d-b22b-449f-a19a-16cb403c94cd
tasks:
  - docker-test: |
      # apparently docker.io is the namespace for hub.docker.com
      podman run docker.io/oilshell/toil-dummy
  - dummy: |
      cd oil
      services/toil-worker.sh run-dummy
  - publish-html: |
      cd oil
      services/sourcehut.sh publish-html-assuming-ssh-key
