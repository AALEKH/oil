---
in_progress: yes
css_files: ../web/help.css ../web/toc.css
---

Oil Help
========

<!--
IMPORTANT: This doc is processed in TWO WAYS.  Be careful when editing.

To generate HTML:
- split_doc.py and then devtools/cmark.py

To generate text for bin/oil
- 'devtools/cmark.py' to render HTML, then 'make_help.py cards' to generate
  'card' files.

Subset of markdown we use:
- [links] to generate <a href=""></a> (ANSI underline: then add to bottom?)
- `backticks` to generate <code> (ANSI: bold or reverse)
- 4 space indents  to generate <pre><code>
- fenced code blocks to generate <pre><code class="language-X">

We could also allow:
- **bold** for bold
- *foo* for italic / underline

-->


This doc describes every aspect of Oil and OSH briefly, and is indexed by
keywords.

The `help` builtin prints portions of it.

You can also navigate this doc with The [Quick Ref
Index](quick-ref-index.html).

<!--
TODO:

- <h4> also needs anchors generated
  - but not in TOC

- cross ref bash?  <a href="$cross-ref:bash"></a>
  - links appear below the card?

- Check that the cards don't go over 80 chars

- Have a way to mark cards as DEPRECATED
  - dparen ((
  - <h4 deprecated=true>dparen ((</h4>
  - <h4 class="deprecated">dparen ((</h4>
    - well this is not in the TOC.  But the heading itself should be GREY
      instead of BLUE
    - but what about in the quick-ref-index?  Can we somehow mark it there?

help index               # show all topics

help index GROUP

help cmd vars

h2: groups (of sections)
h3: sections
h4: topic/cards

<h2 tag="cmd">Command Language</h2>

# https://stackoverflow.com/questions/42182/how-to-escape-and-inside-pre-tags
# You have to escape though

<div id="cmd>
<pre>
</pre>
</div>


<h2 tag="cmd"></h2>

- And then on the web display them SIDE BY SIDE
- At least two columns, maybe THREE!
- Display mobile CSS

$blog-tag#oil-language
$quick-ref#for
$cross-ref#bash

_devbuild/gen/quick-ref should just have a flat list of IDs then?
or maybe <div class="card" id="foo"></div> can override the default <h4>
processing?

- h2 and h4 have explicit #anchor
- h3 has autogenerated anchor, with #Operators, etc.
  - or actually you could have Usage -> Command Line usage

-->


<div id="toc">
</div>

<h2 id="overview">Overview</h2>

### Usage

This section describes how to use the Oil binary.

<div class="card" id="osh-usage">
<h4 id="osh-usage"><code>bin/osh</code> Usage</h4>

The command line accepted by `bin/osh` is compatible with `/bin/sh` and `bash`.

    osh -c 'echo hi'
    osh myscript.sh
    echo 'echo hi' | osh

It also has a few enhancements:

    osh -n -c 'hello'                    # pretty-print the AST
    osh --ast-format text -n -c 'hello'  # print it full
</div>

<h4 id="oil-usage"><code>bin/oil</code> Usage</h4>

`bin/oil` is the same as `bin/osh` with a the `all:oil` option group set.  So
`bin/oil` also accepts shell flags.

    oil -c 'echo hi'
    oil myscript.oil
    echo 'echo hi' | oil

<h4 id="bundle-usage">App Bundle Usage</h4>

- TODO: describe symlinks to it

<h4 id="config">Configuring the Shell</h4>

- `bin/osh` runs `~/.config/oil/oshrc` at startup
- `bin/oil` runs `~/.config/oil/oilrc` at startup

<h4 id="config">Startup Files</h4>

History is read?


### Lexing

#### comments

A comment starts with `#` and goes until the end of the line.

    echo hi  # print a greeting

#### line-continuation

A backslash `\` at the end of a line continues the line without executing it:

    ls /usr/bin \
       /usr/lib \
       ~/src        # A single command split over three lines

### Oil Lexing

<h2 id="command">Command Language</h2>

### Commands

#### simple-command

Commands are composed of words, and may refer to builtins, Oil procs / shell
"functions", external commands, or aliases:

    echo hi               # a shell builtin doesn't start a process
    ls /usr/bin ~/src     # starts a new process
    myproc "hello $name"
    myshellfunc "hello $name"
    myalias -l

<!-- TODO: document lookup order -->

<h4 id="semicolon">semicolon ;</h4>

Run two commands in sequence like this:

    echo one; echo two

or this:

    echo one
    echo two

### Conditional

### Iteration

### Control Flow

### Grouping

### Concurrency

### Redirects

### Other Command

<h4 id="dparen">dparen ((</h4>

#### time

`time [-p] pipeline`

Measures the time taken by a command / pipeline.  It uses the `getrusage()`
function from `libc`.

<!-- Note: bash respects TIMEFORMAT -->


<h2 id="assign">Assigning Variables</h2>

<h2 id="expr">Oil Expression Language</h2>

<h2 id="word">Word Language</h2>

<h2 id="sublang">Other Shell Sublanguages</h2>

<h2 id="builtin">Builtin Commands</h2>

<h2 id="option">Shell Options</h2>

<h2 id="env">Environment Variables</h2>

<h2 id="special">Special Variables</h2>

<h2 id="plugin">Plugins and Hooks</h2>

<h2 id="lib">Oil Libraries</h2>
