---
in_progress: yes
css_files: ../web/quick-ref.css ../web/toc.css
---

Oil Quick Reference
===================

This doc describes every aspect of Oil and OSH briefly, and is indexed by
keywords.

The `help` builtin prints portions of it.

You can also navigate this doc with The [Quick Ref
Index](quick-ref-index.html).

<!--
TODO:

- This document needs its own CSS.  H4 might look difference
- Split this doc into "cards" and assign IDs to them.  Then map keywords to cards

- <h4> also needs anchors generated
  - but not in TOC


- TODO: cross ref bash?  <a href="$cross-ref:bash"></a>
  - links appear below the card?

- Check that the cards don't go over 80 chars

- Have a way to make DEPRECATED
  - dparen ((
  - <h4 deprecated=true>dparen ((</h4>
  - <h4 class="deprecated">dparen ((</h4>
    - well this is not in the TOC.  But the heading itself should be GREY
      instead of BLUE
    - but what about in the quick-ref-index?  Can we somehow mark it there?

help index               # show all topics

help index <group>

11 groups:

intro, command, assign, expr, word, sublang, builtin, option, vars, hook, lib
cmd

help cmd vars

h2: groups (of sections)
h3: sections
h4: topic/cards

quick-ref-index.txt

or md?  or html?

<h2 tag="cmd">Command Language</h2>

# https://stackoverflow.com/questions/42182/how-to-escape-and-inside-pre-tags
# You have to escape though

<div id="cmd>
<pre>
</pre>
</div>


<h2 tag="cmd"></h2>

- And then on the web display them SIDE BY SIDE
- At least two columns, maybe THREE!
- Display mobile CSS

$blog-tag#oil-language
$quick-ref#for
$cross-ref#bash

_devbuild/gen/quick-ref should just have a flat list of IDs then?
or maybe <div class="card" id="foo"></div> can override the default <h4>
processing?

- h2 and h4 have explicit #anchor
- h3 has autogenerated anchor, with #Operators, etc.
  - or actually you could have Usage -> Command Line usage

-->


<div id="toc">
</div>

<h2 id="INTRO">Introduction</h2>

### Usage

<div class="card" id="osh-usage">
<h4 id="osh-usage"><code>bin/osh</code> Usage</h4>

The command line accepted by `bin/osh` is compatible with `/bin/sh` and `bash`.

    osh -c 'echo hi'
    osh myscript.sh
    echo 'echo hi' | osh

It also has a few enhancements:

    osh -n -c 'hello'                    # pretty-print the AST
    osh --ast-format text -n -c 'hello'  # print it full
</div>

<h4 id="oil-usage"><code>bin/oil</code> Usage</h4>

`bin/oil` is the same as `bin/osh` with a the `all:oil` option group set.  So
`bin/oil` also accepts shell flags.

    oil -c 'echo hi'
    oil myscript.oil
    echo 'echo hi' | oil

<h4 id="bundle-usage">App Bundle Usage</h4>

- TODO: describe symlinks to it

<h4 id="config">Configuring the Shell</h4>

- `bin/osh` runs `~/.config/oil/oshrc` at startup
- `bin/oil` runs `~/.config/oil/oilrc` at startup

<h4 id="config">Startup Files</h4>

History is read?


### Lexing

#### comments

A comment starts with `#` and goes until the end of the line.

    echo hi  # print a greeting

#### line-continuation

A backslash `\` at the end of a line continues the line without executing it:

    ls /usr/bin \
       /usr/lib \
       ~/src        # A single command split over three lines

### Oil Lexing

<h2 id="COMMAND-LANGUAGE">Command Language</h2>

### Commands

#### simple-command

Commands are composed of words, and may refer to builtins, Oil procs / shell
"functions", external commands, or aliases:

    echo hi               # a shell builtin doesn't start a process
    ls /usr/bin ~/src     # starts a new process
    myproc "hello $name"
    myshellfunc "hello $name"
    myalias -l

<!-- TODO: document lookup order -->

#### semicolon ;

Run two commands in sequence like this:

    echo one; echo two

or this:

    echo one
    echo two

### Conditional

### Iteration

### Control Flow

### Grouping

### Concurrency

### Redirects

### Other Command

#### dparen ((

#### time

`time [-p] pipeline`

Measures the time taken by a command / pipeline.  It uses the `getrusage()`
function from `libc`.

<!-- Note: bash respects TIMEFORMAT -->


<h2 id="ASSIGNING-VARIABLES">Assigning Variables</h2>

<h2 id="OIL-EXPRESSION-LANGUAGE">Oil Expression Language</h2>

<h2 id="WORD-LANGUAGE">Word Language</h2>

<h2 id="OTHER-SHELL-SUBLANGUAGES">Other Shell Sublanguages</h2>

<h2 id="BUILTIN-COMMANDS">Builtin Commands</h2>

<h2 id="SHELL-OPTIONS">Shell Options</h2>

<h2 id="ENVIRONMENT-VARIABLES">Environment Variables</h2>

<h2 id="SPECIAL-VARIABLES">Special Variables</h2>

<h2 id="PLUGINS-AND-HOOKS">Plugins and Hooks</h2>

<h2 id="OIL-EXTENSIONS">Oil Extensions</h2>

<h2 id="OIL-LIBRARIES">Oil Libraries</h2>
