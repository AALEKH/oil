#!/bin/sh 
#
# POSIX shell script to install a build oil into the proper directory.
# Distributed with the source tarball.

# TODO:
# - copy bin/oil with the right permissions.
# - make dummy man page that points to HTML docs?
#   - or just a cheat sheet for flags, usage, etc.

# NOTE: install is part of coreutils and busybox.

die() {
  echo "FATAL install error: $@" 1<&2
  exit 1
}

# NOTE: The configure step
main() {
  local dest=${1:-/usr/bin}
  if ! install _bin/oil.ovm-dbg $dest; then
    die "Couldn't install oil binary"
  fi

  cd $dest
  if ! ln -s -f oil.ovm-dbg osh; then  # -f to overwrite
    die "Couldn't create osh symlink"
  fi
}

main "$@"
