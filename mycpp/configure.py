#!/usr/bin/env python2
"""
configure.py
"""
from __future__ import print_function

import os
import sys

sys.path.append('../vendor')
import ninja_syntax


def main(argv):
  n = ninja_syntax.Writer(open('build.ninja', 'w'))

  n.comment('Translate, compile, and test mycpp examples.')
  n.comment('Generated by %s.' % os.path.basename(__file__))
  n.newline()

  n.rule('translate',
         command='./run.sh ninja-translate $in $out',
         description='translate $in $out')
  n.newline()

  n.build('_gen/cgi.cc', 'translate', 'examples/cgi.py')


if __name__ == '__main__':
  try:
    main(sys.argv)
  except RuntimeError as e:
    print('FATAL: %s' % e, file=sys.stderr)
    sys.exit(1)
